---
title: "final project educ covid"
format: html
editor: visual
---

## lien Github et sources des données
Le lien vers le projet GitHub: https://github.com/adelecherigny/final_project_educ_covid

### création du data directory
```{r}
data_dir <- dir.create("data")
```

### Chargement de la base UNESCO
Téléchargement du fichier depuis internet grâce au lien:
```{r, cache=TRUE}
download.file("https://covid19.uis.unesco.org/wp-content/uploads/sites/11/2021/05/UNESCO_school_closures_database.xlsx", destfile = "data/school_closure.xlsx")
```

Selon certains navigateurs il se peut que le fichier soit zippé, si c'est le cas il faut effectuer la commande suivante (sinon vous pouvez quand même lancer le code cette commande ne sera juste pas appliqué si le fichier n'est pas zippé)
```{r}
unzip ("data/school_closure.xlsx", exdir = "data/school_closure")
```


Chargement du fichier
```{r , cache=TRUE}
library(readxl)
school_closure_xlsx <- read_xlsx("data/school_closure.xlsx")
```

Conversion au format csv
```{r , cache=TRUE}
school_closure_xlsx <- as.data.frame(school_closure_xlsx)
write.csv(school_closure_xlsx, "data/school_closure.csv", row.names = FALSE)
```

Suppression du fichier xlsx et chargement du fichier csv
```{r, cache=TRUE}
file.remove("data/school_closure.xlsx")
rm(school_closure_xlsx)
library(vroom)
school_closure <- vroom("data/school_closure.csv")
```

### Chargement des bases PISA
Les fichiers PISA ne sont pas téléchargeables directement depuis internet (error 403), nous avons ensuite de le faire par l'intermédiaire d'un drive ne ligne mais nous avons recontré le même type d'erreur. Et nous ne pouvons pas les mettre sur Git car ils sont trop volumineux (plusieurs Go).
Par conséquent, nous nous en excusons mais nous allons mettre les instructions avec les liens nécessaires pour récupérer les fichiers ici. 
les manipulations dans cette partie prennent beaucoup de temps (plusieurs minutes pour certaines) en raison de la taille des fichiers.

#### PISA 2018 (Student Questionnaire)
Téléchargement du fichier PISA 2018 depuis son lien internet: https://www.oecd.org/content/dam/oecd/en/data/datasets/pisa/pisa-2018-datasets/ssas-sps-data-files/SAS_STU_QQQ.zip

Une fois le fichier téléchargé il faut le mettre dans le data directory (les fonctions interactives n'étant pas disponible sur Quarto il faut décommenter les ligne si dessous une fois sur R pour qu'elle fonctionne ou alors mettre manuellement le fichier zip dans le bon dossier)
```{r, cache=TRUE}
##file_path_2018 <- file.choose() ## ici il faut chosir le fichier ZIP PISA 2018 que vous venez de télécharger
##file.rename(file_path_2018, to = "data/PISA_2018.zip" )
```
Si vous décidez de placer le fichier manuellement dans le data directory vous pouvez utiliser directement cette commande
```{r, cache=TRUE}
file.rename(from = "data/SAS_STU_QQQ.zip", to = "data/PISA_2018.zip" )
```

Maintenant que le fichier zippé est dans le data directory, on va le dézippé et le mettre au format csv
```{r, cache=TRUE}
unzip("data/PISA_2018.zip", exdir="data/PISA_2018")
library(haven)
PISA_2018_sas <- read_sas("data/PISA_2018/STU/cy07_msu_stu_qqq.sas7bdat")
write.csv(PISA_2018_sas, "data/PISA_2018.csv", row.names = FALSE)
```

Suppression des fichiers inutiles et chargement du fichier csv
```{r, cache=TRUE}
rm(PISA_2018_sas)
```

```{r, cache=TRUE}
library(vroom)
PISA_2018 <- vroom("data/PISA_2018.csv")
```

#### PISA 2022 (Student Questionnaire)
Téléchargement du fichier PISA 2022 depuis son lien internet: https://webfs.oecd.org/pisa2022/STU_QQQ_SAS.zip

Une fois le fichier téléchargé il faut le mettre dans le data directory (les fonctions interactives n'étant pas disponible sur Quarto il faut décommenter les ligne si dessous une fois sur R pour qu'elle fonctionne ou alors mettre manuellement le fichier zip dans le bon dossier ie le data directory crée au départ)
```{r, cache=TRUE}
##file_path_2022 <- file.choose() ## ici il faut chosir le fichier ZIP PISA 2022 que vous venez de télécharger
##file.rename(file_path_2022, to = "data/PISA_2022.zip" )
```
Si vous décidez de placer le fichier manuellement dans le data directory vous pouvez utiliser directement cette commande
```{r, cache=TRUE}
file.rename(from = "data/STU_QQQ_SAS.zip", to = "data/PISA_2022.zip" )
```

Maintenant que le fichier zippé est dans le data directory, on va le dézippé et le mettre au format csv
```{r, cache=TRUE}
unzip("data/PISA_2022.zip", exdir="data/PISA_2022")
library(haven)
PISA_2022_sas <- read_sas("data/PISA_2022/CY08MSP_STU_QQQ.SAS7BDAT")
write.csv(PISA_2022_sas, "data/PISA_2022.csv", row.names = FALSE)
```

Suppression des fichiers inutiles et chargement du fichier csv
```{r, cache=TRUE}
rm(PISA_2022_sas)
```

```{r, cache=TRUE}
library(vroom)
PISA_2022 <- vroom("data/PISA_2022.csv")
```


## Description des données et des sources

### Description des data sets PISA 

récupérées au format SAS, converties au format csv

Les tests PISA (Programme international pour le suivi des acquis des élèves), menés par l’OCDE tous les trois ans, collectent une grande variété de données pour évaluer les compétences des élèves et analyser les facteurs influençant les performances scolaires. Ils concernent les élèves des pays de l’OCDE (des économies avancées avec des systèmes éducatifs bien établis), mais aussi des pays partenaires (qui peuvent être des pays en développement), il y a donc une certaine diversité des contextes socio-économiques et culturels. 

Ils mesurent trois domaines principaux : la lecture, les mathématiques et les sciences. 

En plus des tests, PISA collecte des données qualitatives via des questionnaires remplis par les élèves (sur leur contexte socio-économique, la motivation et les attitudes, les expériences scolaires), les chefs d’établissement (sur les caractéristiques de l’école, les ressources disponibles, et les pratiques et politiques éducatives) et les parents (sur leurs activités avec leur enfant, leur ambition pour leur enfant, et leurs idées politiques et sociales). Ces données permettent de comprendre les facteurs qui influencent les résultats scolaires.

Nos deux bases de données sont deux enquêtes PISA datant de 2018 et 2022 (soit respectivement avant et après la pandémie mondiale de 2020). 

Ils contiennent les réponses données par les étudiants, et leurs parents au questionnaire, avec en plus leur performance au test), et précisent ainsi leur pays d’origine, leur âge, leur contexte socio-économique, mais aussi leur accès aux ressources informatiques. 

Nous allons utiliser ces datasets pour voir le niveau des élèves avant la pandémie de COVID 19 en sélectionnant les questions d'intérêt et voir les différences qui existaient déjà entre les pays de l’OCDE avant la pandémie et le confinement. 

### description du dataset de l'UNESCO 
récupérées au format xlsx, converties en csv

Le nom entier de cette base de données est UNESCO_school_disclosures_database. 

Le dataset nous donne par pays et par date le statut des établissements scolaires durant la pandémie (fermés, partiellement fermés ( temps partiel) ou ouvertes). Les données sont données du 16 février 2020 (soit 2 mois ½ après la découverte du premier cas en Chine, alors que la pandémie se diffuse dans le monde entier, provoquant de multiples confinements) au 31 mars 2022 (alors que la majorité des pays ont annoncé la fin des restrictions sanitaires majeures), soit une période globale de 2 ans et 6 semaines et donc 776 observations. 

La base de données a été formée par l’UNESCO afin d‘établir un suivi des fermetures des établissements scolaires causées par la pandémie de COVID-19 en 2020. L’UNESCO est une institution internationale de l’ONU qui a pour objectif de contribuer au maintien de la paix et de la sécurité en resserrant la collaboration entre nations, notamment par l'éducation. Elle a donc entrepris cette enquête afin de mettre en valeur l’ampleur de la perturbation de la pandémie sur l’éducation, d’identifier les groupes les plus vulnérables et d’orienter les actions des gouvernements et des ONG. 

La base de données est aussi intéressante puisqu’elle donne des informations sur les modalités d’apprentissage à distance, plus précisément si la radio, la télévision et l’apprentissage en ligne étaient accessibles, afin de préciser l’ampleur de l’interruption de l’apprentissage. 

Elle précise aussi le stade de développement du pays (low, middle ou high income). 

En agrégeant ces données, nous allons pouvoir avoir le nombre total de jours pendant lesquels les écoles ont été fermées par pays et ainsi comparer les évolutions des enquêtes PISA par rapport au nombre de jours durant lesquels les établissements scolaires ont été fermés durant la pandémie. 




## Informations basique sur les données brutes 

## Nettoyage des données 
### UNESCO 

### PISA 2018

### PISA 2022 

## Informations basiques sur les données nettoyées

## Data joining 

## Description des variables importantes 

## Description de la question de recherche 

## Graphical representation of the main variables 
